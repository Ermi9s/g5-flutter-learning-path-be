<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- 

User 1:
username: user@gmail.com
id: 66c84151b7068ee15142f817
token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzZXJAZ21haWwuY29tIiwic3ViIjoiNjZiZGUzNmU5YmJlMDdmYzM5MDM0Y2RkIiwiaWF0IjoxNzI0NDEyMjU4LCJleHAiOjE3MjQ4NDQyNTh9.QIERSLkRYkjUZbXQ5O_da76d1Yn4GWA0BUUUCRIO88A

User 2:
id: 66c840e4b7068ee15142f7ef
email: cat@gmail.com
token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImNhdEBnbWFpbC5jb20iLCJzdWIiOiI2NmM4NDBlNGI3MDY4ZWUxNTE0MmY3ZWYiLCJpYXQiOjE3MjQ0MTI0MTksImV4cCI6MTcyNDg0NDQxOX0.1WxGXFXiJD_pIvm96rgxoDAC3Tzfb5ac8oGtJYIAY_E

Chat ID: 66c84151b7068ee15142f817


////////////// local
user 1 :
email: user@gmail.com
token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzZXJAZ21haWwuY29tIiwic3ViIjoiNjZjNzYzNGE5MWM2ODIzNDU0ZTg2MjAyIiwiaWF0IjoxNzI0NDEzOTA0LCJleHAiOjE3MjQ4NDU5MDR9.GOA0IV5YYdYBoQYpZG6_H_Gp5lPNG9mfB1xiBlF6j1Q
id: 66c7634a91c6823454e86202


user 2:
id: 66c730840740f8c2bae904e0
email: a@a.com
token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFAYS5jb20iLCJzdWIiOiI2NmM3MzA4NDA3NDBmOGMyYmFlOTA0ZTAiLCJpYXQiOjE3MjQ0MTM5OTQsImV4cCI6MTcyNDg0NTk5NH0.UxC_IVuIzF6SsZRCJ6xk0QNcotX90--fc5vF8anAPV8

chat: 66c767d7944d8f950440bd9e

 -->

<body>
    <select id="token">
        <!-- <option
            value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFAYS5jb20iLCJzdWIiOiI2NmM3MzA4NDA3NDBmOGMyYmFlOTA0ZTAiLCJpYXQiOjE3MjQzNDQ4NjYsImV4cCI6MTcyNDc3Njg2Nn0.OQyBbwnbjhcyISe-lwRpIztsJ70Gnftiwuiteh1Z5k0">
            A</option> -->
        <option
            value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzZXJAZ21haWwuY29tIiwic3ViIjoiNjZiZGUzNmU5YmJlMDdmYzM5MDM0Y2RkIiwiaWF0IjoxNzI0NDEyMjU4LCJleHAiOjE3MjQ4NDQyNTh9.QIERSLkRYkjUZbXQ5O_da76d1Yn4GWA0BUUUCRIO88A">
            remote User</option>
        <option
            value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImNhdEBnbWFpbC5jb20iLCJzdWIiOiI2NmM4NDBlNGI3MDY4ZWUxNTE0MmY3ZWYiLCJpYXQiOjE3MjQ0MTI0MTksImV4cCI6MTcyNDg0NDQxOX0.1WxGXFXiJD_pIvm96rgxoDAC3Tzfb5ac8oGtJYIAY_E">
            remote Cat</option>
        <option
            value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzZXJAZ21haWwuY29tIiwic3ViIjoiNjZjNzYzNGE5MWM2ODIzNDU0ZTg2MjAyIiwiaWF0IjoxNzI0NDEzOTA0LCJleHAiOjE3MjQ4NDU5MDR9.GOA0IV5YYdYBoQYpZG6_H_Gp5lPNG9mfB1xiBlF6j1Q">
            local User</option>
        <option
            value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFAYS5jb20iLCJzdWIiOiI2NmM3MzA4NDA3NDBmOGMyYmFlOTA0ZTAiLCJpYXQiOjE3MjQ0MTM5OTQsImV4cCI6MTcyNDg0NTk5NH0.UxC_IVuIzF6SsZRCJ6xk0QNcotX90--fc5vF8anAPV8">
            local a@a.com</option>
    </select>
    <input type="text" id="event" placeholder="event" value="message:send">

    <textarea type="text" id="message" placeholder="message">
        {
            "chatId": "66c84151b7068ee15142f817",
            "content": "Hello",
            "type": "text"
        }
    </textarea>
    <button id="send-btn">Send</button>
    <button id="connect-btn">connect</button>

    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script>

        let socket;
        document.getElementById("send-btn").addEventListener("click", () => {
            const event = document.getElementById("event").value;
            socket.emit(event, JSON.parse(document.getElementById("message").value));
        });

        document.getElementById("connect-btn").addEventListener("click", () => {
            const token = document.getElementById("token").value;
            socket = io("http://localhost:3000", {
                transport: ['websocket'],
                extraHeaders: {
                    "Authorization": `Bearer ${token}`
                }
            });


            socket.on("connect", () => {
                console.log("Connected");
            });

            socket.on("disconnect", () => {
                console.log("Disconnected");
            });

            socket.on("message:received", (data) => {
                console.log(data);
            });

            socket.on("message:delivered", (data) => {

                console.log(data);
            });

            socket.on("error", (error) => {
                console.log(error);
            });

            socket.on("connect_error", (error) => {
                console.log(error);
            });
        });


    </script>
</body>

</html>